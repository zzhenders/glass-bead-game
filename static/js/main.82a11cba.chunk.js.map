{"version":3,"sources":["Api.js","NavButton.js","SearchForm.js","Navbar.js","Bookmarker.js","Respond.js","User.js","Post.js","Aggregate.js","PostTile.js","Panel.js","PostExt.js","Bead.js","Login.js","Settings.js","Register.js","References.js","Write.js","Main.js","App.js","serviceWorker.js","index.js"],"names":["apiBase","getPosts","api","uri","fetch","then","response","json","getBookmarks","arrayOfPostIds","uid","join","getFollowing","getUsernames","arrayOfUsernames","updateBookmark","post_id","action","method","headers","body","updateFollowing","user_id","NavButton","id","this","props","icon","alt","size","onClick","React","Component","SearchForm","state","terms","handleChange","bind","handleSubmit","event","setState","target","value","setView","toggleShowSearch","preventDefault","onSubmit","type","name","onChange","hidden","Navbar","isShowSearch","data","JSON","stringify","logoutUser","undefined","logout","setUid","Bookmarker","className","bookmarker","isBookmarked","Respond","User","username","users","stopPropagation","setFollowing","following","hasOwnProperty","Post","title","content","aggregateIsLoaded","Aggregate","setBookmarker","removeBookmark","addBookmark","uname","removeFollowing","addFollowing","bookmarks","posts","isLoaded","lookupUsernames","lookupBookmarks","lookupFollowing","newBookmarks","newFollowing","arrayOfUserIds","userIds","Set","postIds","Object","entries","forEach","post","add","Array","from","length","loadAggregate","prevProps","key","push","PostTile","beadIsLoaded","Panel","classAttribute","PostExt","Bead","references","responses","a","b","c","Promise","all","loadBead","Login","pass","error","handleUnameChange","handlePassChange","loginUser","catch","htmlFor","Settings","editUnameError","deleteUserError","deleteConfirm","handleEdit","handleDelete","handleDeleteConfirm","editUser","deleteUser","Register","confirmPass","unameError","passError","handleConfirmPassChange","validatePass","badPasswordSet","has","registerUser","References","numReferences","keys","showSelector","selectionOptions","selection","toggleShowSelector","doReference","addReference","newSelectionOptions","user_posts","options","referenceItems","removeReference","Write","handleTitleChange","handleContentChange","post_title","newReferences","writePost","slice","d","loadCreate","loadEdit","Main","page","library","faSignInAlt","faUserPlus","faHome","faBookmarkSolid","faBookmarkRegular","faEdit","faSearch","faUserCog","faSignOutAlt","faArrowAltCircleRight","faCheck","faPlusCircle","faMinusCircle","faReply","faLeaf","faTree","faTrashAlt","faPlus","faMinus","faUserCheck","faUserMinus","App","checkedSession","viewPage","viewData","newUid","checkAuthentication","loadSession","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.82a11cba.chunk.js","sourcesContent":["let apiBase = '';\n\nif (process.env.NODE_ENV === 'production') {\n\tapiBase = '';\n}\n\nexport function checkAuthentication() {\n\tconst uri = `${apiBase}/users/auth`\n\treturn fetch(uri)\n\t.then(response => {;\n\t\treturn response.json()\n\t})\n}\n\nexport function getPosts(api) {\n\tconst uri = `${apiBase}${api}`\n\treturn fetch(uri, {\n\t}).then(response => {\n\t\treturn response.json()\n\t});\n}\n\nexport function writePost(api, data) {\n\tconst uri = `${apiBase}${api}`;\n\treturn fetch(uri, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type':  'application/json',\n\t\t},\n\t\tbody: JSON.stringify(data),\n\t});\n}\n\nexport function deletePost(post_id) {\n\tconst uri = `${apiBase}/posts/${post_id}/erase`;\n\treturn fetch(uri, {\n\t\tmethod: 'POST',\n\t});\n}\n\nexport function loginUser(data) {\n\tconst uri = `${apiBase}/users/login`;\n\treturn fetch(uri, {\n\t\tmethod: 'POST',\n\t\theaders: { \n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody: JSON.stringify(data),\n\t}).then(response => {\n\t\treturn response.json()\n\t});\n}\n\nexport function registerUser(data) {\n\tconst uri = `${apiBase}/users/create`;\n\treturn fetch(uri, {\n\t\tmethod: 'POST',\n\t\theaders: { \n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody: JSON.stringify(data),\n\t}).then(response => {\n\t\treturn response.json()\n\t});\n}\n\nexport function editUser(uid, data) {\n\tconst uri = `${apiBase}/users/${uid}/update`;\n\treturn fetch(uri, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody: JSON.stringify(data),\n\t});\n}\n\nexport function deleteUser(uid) {\n\tconst uri = `${apiBase}/users/${uid}/delete`;\n\treturn fetch(uri, {\n\t\tmethod: 'POST',\n\t});\n}\n\nexport function logoutUser(data) {\n\tconst uri = `${apiBase}/users/logout`;\n\treturn fetch(uri, {\n\t\tmethod: 'POST',\n\t\theaders: { \n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody: JSON.stringify(data),\n\t});\n}\n\nexport function getBookmarks(arrayOfPostIds, uid) {\n\tconst uri = `${apiBase}/posts/bookmarked?postids=${arrayOfPostIds.join('.')}&uid=${uid}`\n\treturn fetch(uri)\n\t.then(response => {\n\t\treturn response.json()\n\t});\n}\n\nexport function getFollowing(uid) {\n\tconst uri = `${apiBase}/users/${uid}/following?mode=short`;\n\treturn fetch(uri)\n\t.then(response => {\n\t\treturn response.json()\n\t})\n}\n\nexport function getUsernames(arrayOfUsernames) {\n\tconst uri = `${apiBase}/users/unames?userids=${arrayOfUsernames.join('.')}`\n\treturn fetch(uri)\n\t.then(response => {\n\t\treturn response.json()\n\t});\n}\n\nexport function updateBookmark(uid, post_id, action) {\n\tconst uri = `${apiBase}/users/${uid}/bookmarks/${action}`\n\treturn fetch(uri, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t},\n\t\tbody: `post_id=${post_id}`,\n\t\t});\n}\n\nexport function updateFollowing(uid, user_id, action) {\n\tconst uri = `${apiBase}/users/${user_id}/${action}`\n\treturn fetch(uri, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t},\n\t\tbody: `uid=${uid}`,\n\t\t});\n}\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nclass NavButton extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<FontAwesomeIcon id={this.props.id}\n\t\t\t\ticon={this.props.icon}\n\t\t\t\talt={this.props.alt}\n\t\t\t\tsize=\"2x\"\n\t\t\t\tonClick={this.props.onClick} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default NavButton;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nclass SearchForm extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tterms: ''\n\t\t};\n\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t}\n\n\thandleChange(event) {\n\t\tthis.setState({terms: event.target.value});\n\t}\n\n\thandleSubmit(event) {\n\t\tlet api = `/posts/search?terms=${this.state.terms}`\n\t\tthis.props.setView('aggregate', api);\n\t\tthis.props.toggleShowSearch();\n\t\tevent.preventDefault();\n  \t}\n\n\trender() {\n\t\treturn (\n\t\t\t<form\n\t\t\t\tonSubmit={this.handleSubmit}\n\t\t\t\tid=\"search-form\"\n        \t\taction=\"#\"\n        \t>\n          \t\t<input\n          \t\t\tid=\"search-terms\"\n          \t\t\ttype=\"text\"\n          \t\t\tname=\"terms\"\n          \t\t\tsize=\"10\"\n          \t\t\tonChange={this.handleChange}/>\n          \t\t<label>&nbsp;\n          \t\t\t<FontAwesomeIcon\n          \t\t\ticon=\"arrow-alt-circle-right\"\n          \t\t\tsize=\"lg\"/>\n\t          \t\t<input type=\"submit\" value=\"submit\" hidden/>\n\t          \t</label>\n        \t</form>\n        );\n\t}\n}\n\nexport default SearchForm;\n","import React from 'react';\nimport { logoutUser } from './Api';\nimport NavButton from './NavButton';\nimport SearchForm from './SearchForm';\n\nclass Navbar extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\n\t    this.state = {\n\t    \tisShowSearch: false,\n\t    };\n  \t}\n\n  \tlogout(uid) {\n  \t\tlogoutUser({'uid': uid})\n  \t}\n\n  \ttoggleShowSearch = () => {\n  \t\tthis.setState(state => ({\n  \t\t\tisShowSearch: !state.isShowSearch\n  \t\t}));\n  \t};\n\n  \trender() {\n  \t\tconst uid = this.props.uid;\n\t\treturn (\n\t\t\t\t<nav>\n\t\t\t\t{ uid !== undefined\n\t\t\t\t?\n\t\t\t\t\t<>\n\t\t\t\t\t<NavButton\n\t\t\t\t\t\tid=\"home-btn\"\n\t\t\t\t\t\talt=\"Home\"\n\t\t\t\t\t\ticon=\"home\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tthis.props.setView(\n\t\t\t\t\t\t\t\t'aggregate',\n\t\t\t\t\t\t\t\t`/users/${uid}/following/recent-posts`\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<NavButton\n\t\t\t\t\t\tid=\"bookmarks-btn\"\n\t\t\t\t\t\talt=\"Bookmarks\"\n\t\t\t\t\t\ticon={['fas', 'bookmark']}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tthis.props.setView(\n\t\t\t\t\t\t\t\t'aggregate',\n\t\t\t\t\t\t\t\t`/users/${uid}/bookmarks`\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<NavButton\n\t\t\t\t\t\tid=\"userroot-btn\"\n\t\t\t\t\t\talt=\"Root\"\n\t\t\t\t\t\ticon=\"leaf\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tthis.props.setView(\n\t\t\t\t\t\t\t\t'aggregate',\n\t\t\t\t\t\t\t\t`/users/${uid}/posts/root`\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<NavButton\n\t\t\t\t\t\tid=\"add-post-btn\"\n\t\t\t\t\t\talt=\"Add\"\n\t\t\t\t\t\ticon=\"edit\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tthis.props.setView(\n\t\t\t\t\t\t\t\t'write',\n\t\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t\t<NavButton\n\t\t\t\t\t\tid=\"search-btn\"\n\t\t\t\t\t\talt=\"Search\"\n\t\t\t\t\t\ticon=\"search\"\n\t\t\t\t\t\tonClick={this.toggleShowSearch}/>\n\t\t\t\t\t{this.state.isShowSearch\n\t\t\t\t\t\t? <SearchForm toggleShowSearch={this.toggleShowSearch} setView={this.props.setView}/>\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t<NavButton\n\t\t\t\t\t\tid=\"settings-btn\"\n\t\t\t\t\t\talt=\"Settings\"\n\t\t\t\t\t\ticon=\"user-cog\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tthis.props.setView('settings', '')\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<NavButton\n\t\t\t\t\t\tid=\"logout-btn\"\n\t\t\t\t\t\talt=\"Logout\"\n\t\t\t\t\t\ticon=\"sign-out-alt\"\n\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tthis.logout(uid);\n\t\t\t\t\t\t\t\tthis.props.setUid(undefined);\n\t\t\t\t\t\t\t\tthis.props.setView('login', '');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}/>\n\t\t\t\t\t</>\n\t\t\t\t:\n\t\t\t\t\t<>\n\t\t\t\t\t<NavButton\n\t\t\t\t\t\tid=\"create-user-btn\"\n\t\t\t\t\t\talt=\"Create Account\"\n\t\t\t\t\t\ticon=\"user-plus\"\n\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t() => this.props.setView('register', '')\n\t\t\t\t\t\t}/>\n\t\t\t\t\t<NavButton\n\t\t\t\t\t\tid=\"login-btn\"\n\t\t\t\t\t\talt=\"Login\"\n\t\t\t\t\t\ticon=\"sign-in-alt\"\n\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t() => this.props.setView('login', '')\n\t\t\t\t\t\t}/>\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t</nav>\n\t\t);\n\t}\n}\n\nexport default Navbar;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nclass Bookmarker extends React.Component {\n\trender() {\n\t\tconst uid = this.props.uid;\n\t\tconst post_id = this.props.post_id;\n\t\treturn (\n\t\t\t<span className=\"bookmarker\"\n\t\t\tid=\"pb{post_id}\"\n\t\t\tonClick={\n\t\t\t\t() => {this.props.bookmarker(uid, post_id)}\n\t\t\t}>\n\t\t\t{this.props.isBookmarked(post_id)\n\t\t\t\t? <FontAwesomeIcon icon={['fas', 'bookmark']}/>\n\t\t\t\t: <FontAwesomeIcon icon={['far', 'bookmark']}/>\n\t\t\t}\n\t\t\t</span>\n\t\t);\n\t}\n}\n\nexport default Bookmarker;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nclass Respond extends React.Component {\n\trender() {\n\t\treturn(\n\t\t\t<i onClick={\n\t\t\t\t() => {\n\t\t\t\t\tthis.props.setView(\n\t\t\t\t\t\t'write',\n\t\t\t\t\t\t`?${this.props.post_id}`)\n\t\t\t\t}\n\t\t\t}>\n\t\t\t<FontAwesomeIcon icon=\"reply\" />\n\t\t\t</i>\n\t\t)\n\t}\n}\n\nexport default Respond;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nclass User extends React.Component {\n\trender() {\n\t\tlet username = this.props.users[this.props.user_id];\n\t\tlet user_id = this.props.user_id;\n\t\treturn (\n\t\t\t<span className=\"user\">\n\t\t\t\t<b className=\"username\">@{username}</b>\n\t\t\t\t<i onClick={(event) => {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tthis.props.setView(\n\t\t\t\t\t\t'aggregate',\n\t\t\t\t\t\t`/users/${user_id}/posts/root`);\n\t\t\t\t}}>\n\t\t\t\t\t<FontAwesomeIcon icon=\"leaf\" />\n\t\t\t\t</i>\n\t\t\t\t<i onClick={(event) => {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tthis.props.setView(\n\t\t\t\t\t\t'aggregate',\n\t\t\t\t\t\t`/users/${user_id}/posts?mode=full`);\n\t\t\t\t}}>\n\t\t\t\t\t<FontAwesomeIcon icon=\"tree\" />\n\t\t\t\t</i>\n\t\t\t\t<i onClick={(event) => {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tthis.props.setFollowing(\n\t\t\t\t\t\tthis.props.uid,\n\t\t\t\t\t\tuser_id,\n\t\t\t\t\t\tusername\n\t\t\t\t\t\t)\n\t\t\t\t}}>\n\t\t\t\t{ this.props.following.hasOwnProperty(user_id)\n\t\t\t\t\t? <FontAwesomeIcon icon=\"minus-circle\" />\n\t\t\t\t\t: <FontAwesomeIcon icon=\"plus-circle\" />\n\t\t\t\t}\n\t\t\t\t</i>\n\t\t\t</span>\n\t\t)\n\t}\n}\n\nexport default User;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Bookmarker from './Bookmarker';\nimport Respond from './Respond';\nimport User from './User';\n\nclass Post extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<section className=\"post\">\n\t\t\t\t<h1\n\t\t\t\tclassName=\"title\"\n\t\t\t\tonClick={\n\t\t\t\t\t() => this.props.setView('bead', this.props.post_id)\n\t\t\t\t}>{this.props.title}</h1>\n\t\t\t\t<div className=\"content\">{this.props.content}</div>\n\t\t\t\t<div className=\"options\">\n\t\t\t\t\t{ this.props.aggregateIsLoaded\n\t\t\t\t\t\t? <><User\n\t\t\t\t\t\t\tuid={this.props.uid}\n\t\t\t\t\t\t\tuser_id={this.props.user_id}\n\t\t\t\t\t\t\tusers={this.props.users}\n\t\t\t\t\t\t\tsetFollowing={this.props.setFollowing}\n\t\t\t\t\t\t\tfollowing={this.props.following}\n\t\t\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Bookmarker\n\t\t\t\t\t\t\tuid={this.props.uid}\n\t\t\t\t\t\t\tpost_id={this.props.post_id}\n\t\t\t\t\t\t\tbookmarker={this.props.bookmarker}\n\t\t\t\t\t\t\tisBookmarked={this.props.isBookmarked}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Respond\n\t\t\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\t\t\tpost_id={this.props.post_id}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t: null }\n\t\t\t\t\t{ this.props.uid === this.props.user_id\n\t\t\t\t\t\t? <span\n\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t()=>{\n\t\t\t\t\t\t\t\t\tthis.props.setView('write', this.props.post_id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FontAwesomeIcon className=\"edit\" icon=\"edit\" />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t);\n\t}\n}\n\nexport default Post;\n","import React from 'react';\nimport Post from './Post';\nimport { getPosts, updateBookmark, updateFollowing, getBookmarks,\n\t\t getFollowing, getUsernames } from './Api';\n\nclass Aggregate extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t    \tbookmarks: {},\n\t    \tposts: {},\n\t    \tusers: {},\n\t    \tfollowing: {},\n\t    \tisLoaded: false,\n\t    };\n\t    this.lookupUsernames = this.lookupUsernames.bind(this);\n\t    this.lookupBookmarks = this.lookupBookmarks.bind(this);\n\t    this.lookupFollowing = this.lookupFollowing.bind(this);\n\t    this.setBookmarker = this.setBookmarker.bind(this);\n\t    this.setFollowing = this.setFollowing.bind(this);\n\t    this.addBookmark = this.addBookmark.bind(this);\n\t    this.removeBookmark = this.removeBookmark.bind(this);\n\t    this.isBookmarked = this.isBookmarked.bind(this);\n\t}\n\n  \tsetBookmarker = (uid, post_id) => {\n\t\tif (this.isBookmarked(post_id)) {\n\t\t\tupdateBookmark(uid, post_id, 'delete')\n\t\t\t.then(() => this.removeBookmark(post_id));\n\t\t} else {\n\t\t\tupdateBookmark(uid, post_id, 'create')\n\t\t\t.then(() => this.addBookmark(post_id));\n\t\t}\n  \t}\n\n  \tsetFollowing = (uid, user_id, uname) => {\n  \t\tif (this.state.following.hasOwnProperty(user_id)) {\n  \t\t\tupdateFollowing(uid, user_id, 'unfollow')\n  \t\t\t.then(() => this.removeFollowing(user_id));\n  \t\t} else {\n  \t\t\tupdateFollowing(uid, user_id, 'follow')\n  \t\t\t.then(() => this.addFollowing(user_id, uname));\n  \t\t}\n  \t}\n\n\n  \taddBookmark(post_id) {\n  \t\tconst newBookmarks = {\n  \t\t\t...this.state.bookmarks,\n  \t\t\t[post_id]: true\n  \t\t}\n  \t\tthis.setState({bookmarks: newBookmarks});\n  \t}\n\n  \tremoveBookmark(post_id) {\n  \t\tconst newBookmarks = {\n  \t\t\t...this.state.bookmarks,\n  \t\t\t[post_id]: false\n  \t\t}\n  \t\tthis.setState({bookmarks: newBookmarks});\n  \t}\n\n  \taddFollowing(user_id, uname) {\n  \t\tconst newFollowing = {\n  \t\t\t...this.state.following,\n  \t\t\t[user_id]: uname\n  \t\t}\n  \t\tthis.setState({following: newFollowing});\n  \t}\n\n  \tremoveFollowing(user_id) {\n  \t\tlet newFollowing = this.state.following;\n  \t\tdelete newFollowing[user_id];\n\n  \t\tthis.setState({following: newFollowing});\n  \t}\n\n  \tisBookmarked(post_id) {\n  \t\treturn this.state.bookmarks[post_id];\n  \t}\n\n\tlookupBookmarks(arrayOfPostIds, uid) {\n\t\tgetBookmarks(arrayOfPostIds, uid).then(data => {\n\t\t\tthis.setState({bookmarks: data});\n\t\t})\n\t}\n\n\tlookupFollowing(uid) {\n\t\tgetFollowing(uid).then(data => {\n\t\t\tthis.setState({following: data});\n\t\t})\n\t}\n\n\tlookupUsernames(arrayOfUserIds) {\n\t\tgetUsernames(arrayOfUserIds).then(data => {\n\t\t\tthis.setState({users: data});\n\t\t})\n\t};\n\n\tloadAggregate() {\n\t\tgetPosts(this.props.api)\n\t\t.then(data => {this.setState({posts: data})})\n\t\t.then(() => {\n\t\t\tlet userIds = new Set();\n\t\t\tlet postIds = new Set();\n\n\t\t\tObject.entries(this.state.posts).forEach(([key, post]) => {\n\t\t\t\tuserIds.add(post.user_id);\n\t\t\t\tpostIds.add(post.id);\n\t\t\t});\n\n\t\t\tuserIds = Array.from(userIds);\n\t\t\tpostIds = Array.from(postIds);\n\n\t\t\tif (userIds.length > 0 && postIds.length > 0) {\n\t\t\t\tthis.lookupUsernames(userIds);\n\t\t\t\tthis.lookupFollowing(this.props.uid);\n\t\t\t\tthis.lookupBookmarks(postIds, this.props.uid);\n\t\t\t}\n\t\t\tthis.setState({isLoaded: true});\n\t\t});\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadAggregate();\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tif (prevProps.api !== this.props.api) { \n\t\t\tthis.loadAggregate();\n\t\t}\n\t}\n\n\trender() {\n\t\tlet posts = [];\n\t\tObject.entries(this.state.posts).forEach(([key, post]) => {\n\t\t\tposts.push(\n\t\t\t\t<Post\n\t\t\t\t\tuid={this.props.uid}\n\t\t\t\t\tkey={key}\n\t\t\t\t\tpost_id={post.id}\n\t\t\t\t\ttitle={post.title}\n\t\t\t\t\tcontent={post.content}\n\t\t\t\t\tuser_id={post.user_id}\n\t\t\t\t\tusers={this.state.users}\n\t\t\t\t\tfollowing={this.state.following}\n\t\t\t\t\tsetFollowing={this.setFollowing}\n\t\t\t\t\tbookmarker={this.setBookmarker}\n\t\t\t\t\tisBookmarked={this.isBookmarked}\n\t\t\t\t\taggregateIsLoaded={this.state.isLoaded}\n\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t/>\n\t\t\t);\t\n\t\t});\n\t\treturn (\n\t\t\t<div className=\"aggregate\" id=\"main\">\n\t\t\t\t<div className=\"view flex-flow-row-wrap\">\n\t\t\t\t\t{posts}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Aggregate;\n","import React from 'react';\nimport User from './User';\n\nclass PostTile extends React.Component {\n\trender() {\n\t\tlet post_id = this.props.post_id;\n\t\treturn (\n\t\t\t<section\n\t\t\t\tclassName=\"post tile\">\n\t\t\t\t<h1\n\t\t\t\tclassName=\"title\"\n\t\t\t\tonClick={\n\t\t\t\t\t() => {\n\t\t\t\t\t\tthis.props.setView('bead', post_id);\n\t\t\t\t\t}}\n\t\t\t\t>{this.props.title}</h1>\n\t\t\t\t<div className=\"content\">{this.props.content}</div>\n\t\t\t\t<div className=\"options\">\n\t\t\t\t\t{ this.props.beadIsLoaded\n\t\t\t\t\t\t? <User\n\t\t\t\t\t\t\tuid={this.props.uid}\n\t\t\t\t\t\t\tuser_id={this.props.user_id}\n\t\t\t\t\t\t\tusers={this.props.users}\n\t\t\t\t\t\t\tsetFollowing={this.props.setFollowing}\n\t\t\t\t\t\t\tfollowing={this.props.following}\n\t\t\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t);\n\t}\n}\n\nexport default PostTile;\n","import React from 'react';\nimport PostTile from './PostTile';\n\nclass Panel extends React.Component {\n\trender() {\n\t\tlet posts = [];\n\t\tlet classAttribute = `panel ${this.props.type}`\n\t\tObject.entries(this.props.posts).forEach(([key, post]) => {\n\t\t\tposts.push(\n\t\t\t\t<PostTile\n\t\t\t\t\tkey={key}\n\t\t\t\t\tuid={this.props.uid}\n\t\t\t\t\tpost_id={post.id}\n\t\t\t\t\ttitle={post.title}\n\t\t\t\t\tcontent={post.content}\n\t\t\t\t\tuser_id={post.user_id}\n\t\t\t\t\tusers={this.props.users}\n\t\t\t\t\tbeadIsLoaded={this.props.beadIsLoaded}\n\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\tsetFollowing={this.props.setFollowing}\n\t\t\t\t\tfollowing={this.props.following}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t\treturn (\n\t\t\t<div className={classAttribute} id=\"references\">\n\t\t\t\t{posts}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Panel;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Bookmarker from './Bookmarker';\nimport Respond from './Respond';\nimport User from './User';\n\nclass PostExt extends React.Component {\n\trender() {\n\t\treturn (\n\t\t\t<article className=\"post ext\">\n\t\t\t\t<h1\n\t\t\t\tclassName=\"title\"\n\t\t\t\t>{this.props.title}</h1>\n\t\t\t\t<div className=\"content\">{this.props.content}</div>\n\t\t\t\t<div className=\"options\">\n\t\t\t\t\t{ this.props.beadIsLoaded\n\t\t\t\t\t\t? <><User\n\t\t\t\t\t\t\tuid={this.props.uid}\n\t\t\t\t\t\t\tuser_id={this.props.user_id}\n\t\t\t\t\t\t\tusers={this.props.users}\n\t\t\t\t\t\t\tsetFollowing={this.props.setFollowing}\n\t\t\t\t\t\t\tfollowing={this.props.following}\n\t\t\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Bookmarker\n\t\t\t\t\t\t\tuid={this.props.uid}\n\t\t\t\t\t\t\tpost_id={this.props.post_id}\n\t\t\t\t\t\t\tbookmarker={this.props.bookmarker}\n\t\t\t\t\t\t\tisBookmarked={this.props.isBookmarked}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Respond\n\t\t\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\t\t\tpost_id={this.props.post_id}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t{ this.props.uid === this.props.user_id\n\t\t\t\t\t\t? <i onClick={()=>{ this.props.setView('write', this.props.post_id)}}>\n\t\t\t\t\t\t<FontAwesomeIcon icon=\"edit\" />\n\t\t\t\t\t\t</i>\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</article>\n\t\t);\n\t}\n}\n\nexport default PostExt;\n","import React from 'react';\nimport Panel from './Panel';\nimport PostExt from './PostExt'\nimport { getPosts, updateBookmark, updateFollowing, getBookmarks,\n\t\t getFollowing, getUsernames } from './Api';\n\nclass Bead extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t    \tbookmarks: {},\n\t    \tfollowing: {},\n\t    \tusers: {},\n\t    \treferences: {},\n\t    \tresponses: {},\n\t    \tpost: {},\n\t    \tisLoaded: false,\n\t    };\n\t    this.lookupBookmarks = this.lookupBookmarks.bind(this);\n\t    this.lookupFollowing = this.lookupFollowing.bind(this);\n\t    this.lookupUsernames = this.lookupUsernames.bind(this);\n\t    this.setBookmarker = this.setBookmarker.bind(this);\n\t    this.setFollowing = this.setFollowing.bind(this);\n\t    this.addBookmark = this.addBookmark.bind(this);\n\t    this.removeBookmark = this.removeBookmark.bind(this);\n\t    this.isBookmarked = this.isBookmarked.bind(this);\n  \t}\n\n  \tsetBookmarker = (uid, post_id) => {\n\t\tif (this.isBookmarked(post_id)) {\n\t\t\tupdateBookmark(uid, post_id, 'delete')\n\t\t\t.then(() => this.removeBookmark(post_id));\n\t\t} else {\n\t\t\tupdateBookmark(uid, post_id, 'create')\n\t\t\t.then(() => this.addBookmark(post_id));\n\t\t}\n  \t}\n\n  \tsetFollowing = (uid, user_id, uname) => {\n  \t\tif (this.state.following.hasOwnProperty(user_id)) {\n  \t\t\tupdateFollowing(uid, user_id, 'unfollow')\n  \t\t\t.then(() => this.removeFollowing(user_id));\n  \t\t} else {\n  \t\t\tupdateFollowing(uid, user_id, 'follow')\n  \t\t\t.then(() => this.addFollowing(user_id, uname));\n  \t\t}\n  \t}\n\n  \taddBookmark(post_id) {\n  \t\tconst newBookmarks = {\n  \t\t\t...this.state.bookmarks,\n  \t\t\t[post_id]: true\n  \t\t}\n  \t\tthis.setState({bookmarks: newBookmarks});\n  \t}\n\n  \tremoveBookmark(post_id) {\n  \t\tconst newBookmarks = {\n  \t\t\t...this.state.bookmarks,\n  \t\t\t[post_id]: false\n  \t\t}\n  \t\tthis.setState({bookmarks: newBookmarks});\n  \t}\n\n  \taddFollowing(user_id, uname) {\n  \t\tconst newFollowing = {\n  \t\t\t...this.state.following,\n  \t\t\t[user_id]: uname\n  \t\t}\n  \t\tthis.setState({following: newFollowing});\n  \t}\n\n  \tremoveFollowing(user_id) {\n  \t\tlet newFollowing = this.state.following;\n  \t\tdelete newFollowing[user_id];\n\n  \t\tthis.setState({following: newFollowing});\n  \t}\n\n  \tisBookmarked(post_id) {\n  \t\treturn this.state.bookmarks[post_id];\n  \t}\n\n\tlookupBookmarks(arrayOfPostIds, uid) {\n\t\tgetBookmarks(arrayOfPostIds, uid).then(data => {\n\t\t\tthis.setState({bookmarks: data});\n\t\t})\n\t}\n\n\tlookupFollowing(uid) {\n\t\tgetFollowing(uid).then(data => {\n\t\t\tthis.setState({following: data});\n\t\t})\n\t}\n\n\tlookupUsernames(arrayOfUserIds) {\n\t\tgetUsernames(arrayOfUserIds).then(data => {\n\t\t\tthis.setState({users: data});\n\t\t})\n\t};\n\n\tloadBead() {\n\t\tlet a = getPosts(`/posts/${this.props.post_id}/references`).then(\n\t\t\t(data) => {\n\t\t\t\tthis.setState({references: data})\n\t\t\t});\n\t\tlet b = getPosts(`/posts/${this.props.post_id}`).then(\n\t\t\t(data) => {\n\t\t\t\tthis.setState({post: data})\n\t\t\t});\n\t\tlet c = getPosts(`/posts/${this.props.post_id}/responses`).then(\n\t\t\t(data) => {\n\t\t\t\tthis.setState({responses: data})\n\t\t\t});\n\t\tPromise.all([a, b, c]).then(() => {\n\t\t\tlet userIds = new Set();\n\t\t\tlet postIds = new Set();\n\n\t\t\tObject.entries(this.state.references).forEach(([key, post]) => {\n\t\t\t\tuserIds.add(post.user_id);\n\t\t\t\tpostIds.add(post.id);\n\t\t\t});\n\t\t\tObject.entries(this.state.responses).forEach(([key, post]) => {\n\t\t\t\tuserIds.add(post.user_id);\n\t\t\t\tpostIds.add(post.id);\n\t\t\t});\n\t\t\tuserIds.add(this.state.post.user_id);\n\t\t\tpostIds.add(this.state.post.id);\n\n\t\t\tthis.lookupUsernames(Array.from(userIds));\n\t\t\tthis.lookupFollowing(this.props.uid);\n\t\t\tthis.lookupBookmarks(Array.from(postIds), this.props.uid);\n\t\t\tthis.setState({isLoaded: true});\n\t\t});\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.loadBead();\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tif (prevProps.post_id !== this.props.post_id) {\n\t\t\tthis.loadBead();\n\t\t}\n\t}\n\n\trender() {\n\t\treturn(\n\t\t\t<div className=\"bead\" id=\"main\">\n\t\t\t\t<Panel\n\t\t\t\t\ttype=\"references\"\n\t\t\t\t\tuid={this.props.uid}\n\t\t\t\t\tposts={this.state.references}\n\t\t\t\t\tusers={this.state.users}\n\t\t\t\t\tbeadIsLoaded={this.state.isLoaded}\n\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\tfollowing={this.state.following}\n\t\t\t\t\tsetFollowing={this.setFollowing}\n\t\t\t\t/>\n\t\t\t\t<div className=\"view\">\n\t\t\t\t\t<PostExt\n\t\t\t\t\t\tuid={this.props.uid}\n\t\t\t\t\t\tpost_id={this.state.post.id}\n\t\t\t\t\t\ttitle={this.state.post.title}\n\t\t\t\t\t\tcontent={this.state.post.content}\n\t\t\t\t\t\tuser_id={this.state.post.user_id}\n\t\t\t\t\t\tusers={this.state.users}\n\t\t\t\t\t\tfollowing={this.state.following}\n\t\t\t\t\t\tsetFollowing={this.setFollowing}\n\t\t\t\t\t\tbookmarker={this.setBookmarker}\n\t\t\t\t\t\tisBookmarked={this.isBookmarked}\n\t\t\t\t\t\tbeadIsLoaded={this.state.isLoaded}\n\t\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<Panel\n\t\t\t\t\ttype=\"responses\"\n\t\t\t\t\tuid={this.props.uid}\n\t\t\t\t\tposts={this.state.responses}\n\t\t\t\t\tusers={this.state.users}\n\t\t\t\t\tbeadIsLoaded={this.state.isLoaded}\n\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\tfollowing={this.state.following}\n\t\t\t\t\tsetFollowing={this.setFollowing}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Bead;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { loginUser } from './Api';\n\nclass Login extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tuname: '',\n\t\t\tpass: '',\n\t\t\terror: false,\n\t\t}\n\t\tthis.handleUnameChange = this.handleUnameChange.bind(this);\n\t\tthis.handlePassChange = this.handlePassChange.bind(this);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t}\n\n\thandleUnameChange(event) {\n\t\tthis.setState({uname: event.target.value});\n\t}\n\n\thandlePassChange(event) {\n\t\tthis.setState({pass: event.target.value});\n\t}\n\n\thandleSubmit(event) {\n\t\tevent.preventDefault();\n\t\tif (this.state.uname !== '' &&\n\t\t\tthis.state.pass !== '') {\n\t\t\tconst data = {'uname': this.state.uname,\n\t\t\t\t\t\t  'pass': this.state.pass}\n\t\t\tloginUser(data)\n\t\t\t.then( (response) => {\n\t\t\t\tthis.props.setUid(response.uid);\n\t\t\t\tthis.props.setView(\n\t\t\t\t\t'aggregate',\n\t\t\t\t\t`/users/${response.uid}/following/recent-posts`\n\t\t\t\t)\n\t\t\t})\n\t\t\t.catch( () => {\n\t\t\t\tthis.setState({error: true});\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"login view\" id=\"main\">\n\t\t\t\t<div className=\"login container\">\n\t\t\t\t<form\n\t\t\t\t\tclassName=\"login-form\"\n\t\t\t\t\tonSubmit={this.handleSubmit}\n\t\t\t\t><br/>\n\t\t\t\t\t<table><tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td><label htmlFor=\"uname\">\n\t\t\t\t\t\t\tUsername \n\t\t\t\t\t\t\t</label></td>\n\t\t\t\t\t\t\t<td><input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tid=\"uname\"\n\t\t\t\t\t\t\t\tname=\"uname\"\n\t\t\t\t\t\t\t\tvalue={this.state.uname}\n\t\t\t\t\t\t\t\tonChange={this.handleUnameChange}\n\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td><label htmlFor=\"pass\">\n\t\t\t\t\t\t\tPassword \n\t\t\t\t\t\t\t</label></td>\n\t\t\t\t\t\t\t<td><input\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tid=\"pass\"\n\t\t\t\t\t\t\t\tname=\"pass\"\n\t\t\t\t\t\t\t\tvalue={this.state.pass}\n\t\t\t\t\t\t\t\tonChange={this.handlePassChange}\n\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody></table>\n\t\t\t\t\t<label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tvalue=\"Login\"\n\t\t\t\t\t\thidden\n\t\t\t\t\t/>\n\t\t\t\t\t<FontAwesomeIcon icon=\"arrow-alt-circle-right\" size=\"lg\"/>\n\t\t\t\t\t<br/></label>\n\t\t\t\t\t{ this.state.error ? <b className=\"error\">username or password incorrect<br/></b> : <br/> }\n\t\t\t\t\t<br/>\n\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Login;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { editUser, deleteUser } from './Api';\n\nclass Settings extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tuname: '',\n\t\t\teditUnameError: false,\n\t\t\tdeleteUserError: false,\n\t\t\tdeleteConfirm: false,\n\t\t}\n\t\tthis.handleUnameChange = this.handleUnameChange.bind(this);\n\t\tthis.handleEdit = this.handleEdit.bind(this);\n\t\tthis.handleDelete = this.handleDelete.bind(this);\n\t\tthis.handleDeleteConfirm = this.handleDeleteConfirm.bind(this);\n\t}\n\n\thandleUnameChange(event) {\n\t\tthis.setState({uname: event.target.value});\n\t}\n\n\thandleEdit(event) {\n\t\tevent.preventDefault();\n\t\tif (this.state.uname !== '') {\n\t\t\tconst data = {\n\t\t\t\t'uname': this.state.uname\n\t\t\t}\n\t\t\teditUser(this.props.uid, data)\n\t\t\t.then( () => {\n\t\t\t\tthis.props.setView(\n\t\t\t\t\t'aggregate',\n\t\t\t\t\t`/users/${this.props.uid}/following/recent-posts`\n\t\t\t\t)\n\t\t\t}).catch( () => {\n\t\t\t\tthis.setState({editUnameError: true})\n\t\t\t});\n\t\t}\n\t}\n\n\thandleDelete(event) {\n\t\tevent.preventDefault();\n\t\tthis.setState({deleteConfirm: true});\n\t}\n\n\thandleDeleteConfirm(event) {\n\t\tevent.preventDefault();\n\t\tdeleteUser(this.props.uid)\n\t\t.then( () => {\n\t\t\tthis.props.setUid(undefined);\n\t\t\tthis.props.setView('login', '');\n\t\t})\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"settings view\" id=\"main\">\n\t\t\t\t<div className=\"container\">\n\t\t\t\t\t<form\n\t\t\t\t\t\tclassName=\"user-settings\"\n\t\t\t\t\t\tid=\"change-uname\"\n\t\t\t\t\t\tonSubmit={this.handleEdit}\n\t\t\t\t\t>\n\t\t\t\t\t\t<label htmlFor=\"uname\">\n\t\t\t\t\t\t\tChange Username: \n\t\t\t\t\t\t</label><br />\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tid=\"uname\"\n\t\t\t\t\t\t\tname=\"uname\"\n\t\t\t\t\t\t\tvalue={this.state.uname}\n\t\t\t\t\t\t\tonChange={this.handleUnameChange}\n\t\t\t\t\t\t/><br />\n\t\t\t\t\t\t<div className=\"settings-options\">\n\t\t\t\t\t\t\t<span id=\"change-name\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tvalue=\"Change Username\"\n\t\t\t\t\t\t\t\t\thidden\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"user-check\" />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t{ !this.state.deleteConfirm\n\t\t\t\t\t\t\t\t? <span id=\"delete-user\" onClick={this.handleDelete}>\n\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"user-minus\" />\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t: <>\n\t\t\t\t\t\t\t\t\t<span id=\"delete-user\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"warning\"\n\t\t\t\t\t\t\t\t\t\tonClick={this.handleDeleteConfirm}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"user-minus\" />\n\t\t\t\t\t\t\t\t\t</span><br/>\n\t\t\t\t\t\t\t\t\t<p className=\"warning\">Are you sure you want to delete your account?</p>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\t\t\t\t\n\t\t\t\t\t</form>\n\t\t\t\t\t{ this.state.editUnameError ? <b>That Username is Taken!</b> : null }\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Settings;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { registerUser } from './Api';\n\nclass Register extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tuname: '',\n\t\t\tpass: '',\n\t\t\tconfirmPass: '',\n\t\t\tunameError: false,\n\t\t\tpassError: false,\n\t\t}\n\t\tthis.handleUnameChange = this.handleUnameChange.bind(this);\n\t\tthis.handlePassChange = this.handlePassChange.bind(this);\n\t\tthis.handleConfirmPassChange = this.handleConfirmPassChange.bind(this);\n\t\tthis.validatePass = this.validatePass.bind(this);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t}\n\n\thandleUnameChange(event) {\n\t\tthis.setState({uname: event.target.value});\n\t}\n\n\thandlePassChange(event) {\n\t\tthis.setState({pass: event.target.value});\n\t}\n\n\thandleConfirmPassChange(event) {\n\t\tthis.setState({confirmPass: event.target.value})\n\t}\n\n\tvalidatePass() {\n\t\tconst badPasswordSet = new Set(['password',\n\t\t\t\t\t\t\t'PASSWORD',\n\t\t\t\t\t\t\tthis.state.uname,\n\t\t\t\t\t\t\t`${this.state.uname}1`,\n\t\t\t\t\t\t\t`${this.state.uname}!`])\n\t\tif (this.state.pass.length < 8 || this.state.pass.length > 128) {\n\t\t\treturn false\n\t\t} else if (badPasswordSet.has(this.state.pass)) {\n\t\t\treturn false\n\t\t} else {\n\t\t\treturn true\n\t\t}\n\t}\n\n\thandleSubmit(event) {\n\t\tevent.preventDefault();\n\t\tif (this.state.uname !== '' &&\n\t\t\tthis.state.pass !== '' &&\n\t\t\tthis.state.pass === this.state.confirmPass) {\n\t\t\tif (this.validatePass() === true) {\n\t\t\t\tconst data = {'uname': this.state.uname,\n\t\t\t\t\t\t\t  'pass': this.state.pass}\n\t\t\t\tregisterUser(data)\n\t\t\t\t.then( (response) => {\n\t\t\t\t\tthis.props.setUid(response.uid);\n\t\t\t\t\tthis.props.setView(\n\t\t\t\t\t\t'aggregate',\n\t\t\t\t\t\t`/users/${response.uid}/following/recent-posts`\n\t\t\t\t\t)\n\t\t\t\t}).catch( () => {\n\t\t\t\t\tthis.setState({unameError: true});\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.setState({passError: true});\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"register view\" id=\"main\">\n\t\t\t\t<div className=\"register container\">\n\t\t\t\t\t<form\n\t\t\t\t\t\tclassName=\"signup\"\n\t\t\t\t\t\tonSubmit={this.handleSubmit}\n\t\t\t\t\t><br/>\n\t\t\t\t\t\t<table><tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td><label htmlFor=\"uname\">\n\t\t\t\t\t\t\tUsername \n\t\t\t\t\t\t\t</label></td>\n\t\t\t\t\t\t\t<td><input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tid=\"uname\"\n\t\t\t\t\t\t\t\tname=\"uname\"\n\t\t\t\t\t\t\t\tvalue={this.state.uname}\n\t\t\t\t\t\t\t\tonChange={this.handleUnameChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td><label htmlFor=\"pass\">\n\t\t\t\t\t\t\tPassword  \n\t\t\t\t\t\t\t</label></td>\n\t\t\t\t\t\t\t<td><input\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tid=\"pass\"\n\t\t\t\t\t\t\t\tname=\"pass\"\n\t\t\t\t\t\t\t\tvalue={this.state.pass}\n\t\t\t\t\t\t\t\tonChange={this.handlePassChange}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td><label htmlFor=\"confirm-password\">\n\t\t\t\t\t\t\tConfirm \n\t\t\t\t\t\t\t</label></td>\n\t\t\t\t\t\t\t<td><input\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tid=\"confirm-password\"\n\t\t\t\t\t\t\t\tname=\"confirm-password\"\n\t\t\t\t\t\t\t\tvalue={this.state.confirmPass}\n\t\t\t\t\t\t\t\tonChange={this.handleConfirmPassChange}\n\t\t\t\t\t\t\t/></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</tbody></table>\n\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tvalue=\"Register User\"\n\t\t\t\t\t\t\t\thidden\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"user-plus\" /><br/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t{ this.state.unameError ? <b className=\"error\">Username already registered!<br/></b> : <br/> }\n\t\t\t\t\t{ this.state.passError ? <b className=\"error\">Password too short or simple!<br/></b> : <br/> }\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default Register;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nclass References extends React.Component {\n\tconstructor(props) {\n\t    super(props);\n\t    this.state = {\n\t    \tnumReferences: Object.keys(this.props.references).length,\n\t    \tshowSelector: false,\n\t    \tselectionOptions: {},\n\t    \tselection: undefined,\n\t    };\n\t    this.toggleShowSelector = this.toggleShowSelector.bind(this);\n\t    this.handleChange = this.handleChange.bind(this);\n\t    this.doReference = this.doReference.bind(this);\n  \t}\n\n  \ttoggleShowSelector() {\n  \t\tthis.setState({showSelector: !this.state.showSelector})\n  \t}\n\n  \thandleChange(event) {\n  \t\tthis.setState({selection: event.target.value});\n  \t}\n\n  \tdoReference(event) {\n  \t\tevent.preventDefault();\n  \t\tif (this.state.selection !== undefined && Object.keys(this.state.selectionOptions).length > 0) {\n\t  \t\tthis.props.addReference(\n\t  \t\t\tthis.state.selection,\n\t  \t\t\tthis.state.selectionOptions[this.state.selection]\n\t  \t\t\t);\n\t  \t\tthis.setState({selection: undefined});\n\t  \t\tthis.toggleShowSelector();\n\t  \t}\n  \t}\n\n  \tcomponentDidMount() {\n  \t\tlet newSelectionOptions = {\n  \t\t\t...this.props.user_posts,\n  \t\t\t...this.props.bookmarks\n  \t\t};\n  \t\tObject.entries(this.props.references)\n  \t\t.forEach((key) => {\n  \t\t\tdelete newSelectionOptions[key[0]];\n  \t\t});\n  \t\tif (Object.keys(newSelectionOptions).length > 0) {\n  \t\t  \tthis.setState({\n  \t\t  \t\tselectionOptions: newSelectionOptions,\n  \t\t\t\tselection: Object.keys(newSelectionOptions)[0],\n  \t\t  \t});\n  \t\t}\n  \t}\n\n  \tcomponentDidUpdate(prevProps) {\n  \t\tif (prevProps.references !== this.props.references) {\n  \t\t\tlet newSelectionOptions = {\n  \t\t\t\t...this.props.user_posts,\n  \t\t\t\t...this.props.bookmarks\n  \t\t\t};\n\t  \t\tObject.entries(this.props.references)\n\t  \t\t.forEach((key) => {\n\t  \t\t\tdelete newSelectionOptions[key[0]];\n\t  \t\t});\n\t  \t\tif (Object.keys(newSelectionOptions).length > 0) {\n\t\t  \t\tthis.setState({\n\t\t  \t\t\tselectionOptions: newSelectionOptions,\n\t\t  \t\t\tselection: Object.keys(newSelectionOptions)[0],\n\t  \t\t\t\tnumReferences: Object.keys(this.props.references).length,\n\t\t  \t\t});\n\t  \t\t}\n  \t\t}\n  \t}\n\n  \trender() {\n  \t\tlet options = [];\n  \t\tObject.entries(this.state.selectionOptions)\n  \t\t.forEach(([key, title]) => {\n  \t\t\toptions.push(\n  \t\t\t\t<option\n  \t\t\t\t\tkey={key}\n  \t\t\t\t\tvalue={key}\n  \t\t\t\t>\n  \t\t\t\t\t{title}\n  \t\t\t\t</option>\n  \t\t\t);\n  \t\t})\n\n\t\tlet referenceItems = [];\n\t\tObject.entries(this.props.references)\n\t\t.forEach(([key, title]) => {\n\t\t\treferenceItems.push(\n\t\t\t\t<span className=\"ref\" key={key}>\n\t\t\t\t\t{title}\n\t\t\t\t\t<span className=\"ref-minus\"\n\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tthis.props.removeReference(key)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n            <FontAwesomeIcon icon=\"minus\" />\n          </span>\n\t\t\t\t</span>\n\t\t\t);\n\t\t})\n\n  \t\treturn (\n  \t\t\t<div className=\"citations\">\n  \t\t\t{referenceItems}<br/>\n  \t\t\t{\n  \t\t\t\t!this.state.showSelector && this.state.numReferences < 4 && options.length > 0\n  \t\t\t\t? <span className=\"ref-plus\"\n  \t\t\t\t\tonClick={this.toggleShowSelector}\n  \t\t\t\t  >\n              <FontAwesomeIcon icon=\"plus\" />\n            </span>\n  \t\t\t\t: null\n  \t\t\t}\n  \t\t\t{\n  \t\t\t\tthis.state.showSelector && this.state.numReferences < 4 && options.length > 0\n  \t\t\t\t? <form onSubmit={this.doReference}>\n  \t\t\t\t\t<select\n  \t\t\t\t\t\tvalue={this.state.selection}\n  \t\t\t\t\t\tname=\"h\"\n  \t\t\t\t\t\tonChange={this.handleChange}\n  \t\t\t\t\t>\n  \t\t\t\t\t\t{options}\n  \t\t\t\t\t</select>\n  \t\t\t\t\t<label>\n              <input type=\"submit\" value=\"Add\" hidden />\n              <FontAwesomeIcon icon=\"plus\" />\n            </label>\n  \t\t\t\t</form>\n  \t\t\t\t: null\n  \t\t\t}\n  \t\t\t</div>\n\t\t)\n  \t}\n}\n\nexport default References;\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {getPosts, writePost} from './Api';\nimport References from './References';\n\nclass Write extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tuser_id: '',\n\t\t\treferences: {},\n\t\t\tbookmarks: {},\n\t\t\tuser_posts: {},\n\t\t\tcontent: '',\n\t\t\ttitle: '',\n\t\t\tisLoaded: false\n\t\t};\n\n\t\tthis.addReference = this.addReference.bind(this);\n\t\tthis.removeReference = this.removeReference.bind(this);\n\t\tthis.handleTitleChange = this.handleTitleChange.bind(this);\n\t\tthis.handleContentChange = this.handleContentChange.bind(this);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t}\n\n\thandleTitleChange(event) {\n\t\tthis.setState({title: event.target.value});\n\t}\n\n\thandleContentChange(event) {\n\t\tthis.setState({content: event.target.value});\n\t}\n\n\taddReference(post_id, post_title) {\n\t\tconst newReferences = {\n\t\t\t...this.state.references,\n\t\t\t[post_id]: post_title\n\t\t};\n\t\tthis.setState({references: newReferences});\n\t}\n\n\tremoveReference(post_id) {\n\t\tconst newReferences = {\n\t\t\t...this.state.references\n\t\t};\n\t\tdelete newReferences[post_id];\n\t\tthis.setState({references: newReferences});\n\t}\n\n\thandleSubmit(event) {\n\t\tevent.preventDefault();\n\t\tlet api;\n\n\t\tif (this.props.post_id === '' || this.props.post_id[0] === '?') {\n\t\t\tapi = '/posts/create'\n\t\t} else {\n\t\t\tapi = `/posts/${this.props.post_id}/edit`\n\t\t}\n\n\t\tlet referencesArray = Object.keys(this.state.references);\n\t\tlet data = {\n\t\t\t\treferences: referencesArray,\n\t\t\t\ttitle: this.state.title,\n\t\t\t\tcontent: this.state.content,\n\t\t\t\tuser_id: this.state.user_id,\n\t\t\t\tuid: this.props.uid,\n\t\t\t};\n\n\t\twritePost(\n\t\t\tapi,\n\t\t\tdata\n\t\t\t).then( () => {\n\t\t\t\tthis.props.setView(\n\t\t\t\t\t'aggregate',\n\t\t\t\t\t`/users/${this.props.uid}/following/recent-posts`,\n\t\t\t\t)\n\t\t\t});\n\t}\n\n\tloadCreate() {\n\t\tthis.setState({user_id: this.props.uid});\n\n\t\tlet a = getPosts(`/users/${this.props.uid}/posts?mode=short`)\n\t\t.then(\n\t\t\t(posts) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tuser_posts: posts,\n\t\t\t\t})\n\t\t\t}\n\t\t);\n\n\t\tlet b = getPosts(`/users/${this.props.uid}/bookmarks?mode=short`)\n\t\t.then(\n\t\t\t(posts) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tbookmarks: posts,\n\t\t\t\t})\n\t\t\t}\n\t\t);\n\n\t\tif (this.props.post_id[0] === '?') {\n\t\t\tlet c = getPosts(`/posts/${this.props.post_id.slice(1)}?mode=short`)\n\t\t\t.then(\n\t\t\t\t(post) => {\n\t\t\t\t\tthis.setState({references: post});\n\t\t\t\t}\n\t\t\t);\n\t\t\tPromise.all([a, b, c]).then(\n\t\t\t\t() => this.setState({isLoaded:true})\n\t\t\t);\n\t\t} else {\n\t\t\tPromise.all([a, b]).then(\n\t\t\t\t() => this.setState({isLoaded: true})\n\t\t\t);\n\t\t}\n\t}\n\n\tloadEdit() {\n\t\tlet a = getPosts(`/posts/${this.props.post_id}`)\n\t\t\t.then(\n\t\t\t\t(post) => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tcontent: post.content,\n\t\t\t\t\t\ttitle: post.title,\n\t\t\t\t\t\tuser_id: post.user_id,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\n\t\tlet b = getPosts(`/posts/${this.props.post_id}/references?mode=short`)\n\t\t\t.then(\n\t\t\t\t(posts) => {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\treferences: posts,\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t);\n\n\t\tlet c = getPosts(`/users/${this.props.uid}/posts?mode=short`)\n\t\t.then(\n\t\t\t(posts) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tuser_posts: posts,\n\t\t\t\t})\n\t\t\t}\n\t\t);\n\n\t\tlet d = getPosts(`/users/${this.props.uid}/bookmarks?mode=short`)\n\t\t.then(\n\t\t\t(posts) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tbookmarks: posts,\n\t\t\t\t})\n\t\t\t}\n\t\t);\n\n\t\tPromise.all([a, b, c, d]).then(\n\t\t\t() => {\n\t\t\t\tthis.setState({isLoaded: true})\n\t\t\t}\n\t\t);\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.props.post_id === '' || this.props.post_id[0] === '?') {\n\t\t\tthis.loadCreate();\n\t\t} else {\n\t\t\tthis.loadEdit()\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"edit view\" id=\"main\">\n\t\t\t\t<div className=\"write container\">\n\t\t\t\t\t{ this.state.isLoaded\n\t\t\t\t\t\t? \n\t\t\t\t\t\t<References\n\t\t\t\t\t\t\treferences={this.state.references}\n\t\t\t\t\t\t\tbookmarks={this.state.bookmarks}\n\t\t\t\t\t\t\tuser_posts={this.state.user_posts}\n\t\t\t\t\t\t\taddReference={this.addReference}\n\t\t\t\t\t\t\tremoveReference={this.removeReference}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t<form onSubmit={this.handleSubmit} className=\"editor\" method=\"post\">\n\t\t\t\t\t\ttitle:<br/>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\t\tvalue={this.state.title}\n\t\t\t\t\t\t\t\tonChange={this.handleTitleChange}\n\t\t\t\t\t\t\t/><br/>\n\t\t\t\t\t\tcontent:<br/>\n\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tname=\"content\"\n\t\t\t\t\t\t\t\tonChange={this.handleContentChange}\n\t\t\t\t\t\t\t\tvalue={this.state.content}\n\t\t\t\t\t\t\t></textarea><br/>\n\t\t\t\t\t\t<label className=\"woptions\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tvalue=\"submit\"\n\t\t\t\t\t\t\t\thidden\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<FontAwesomeIcon icon=\"check\" />\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default Write;\n","import React from 'react';\nimport Aggregate from './Aggregate';\nimport Bead from './Bead';\nimport Login from './Login';\nimport Settings from './Settings';\nimport Register from './Register';\nimport Write from './Write'\n\nclass Main extends React.Component {\n\n\trender() {\n\t\tswitch (this.props.page) {\n\t\t\tcase \"aggregate\":\n\t\t\t\treturn (\n\t\t\t\t\t<Aggregate\n\t\t\t\t\t\tuid={this.props.uid}\n\t\t\t\t\t\tapi={this.props.data}\n\t\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tcase \"bead\":\t\t\n\t\t\t\treturn (\n\t\t\t\t\t<Bead\n\t\t\t\t\t\tuid={this.props.uid}\n\t\t\t\t\t\tpost_id={this.props.data}\n\t\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"write\":\n\t\t\t\treturn (\n\t\t\t\t\t<Write \n\t\t\t\t\t\tuid={this.props.uid}\n\t\t\t\t\t\tpost_id={this.props.data}\n\t\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\t\tsetUid={this.props.setUid}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"register\":\n\t\t\t\treturn (\n\t\t\t\t\t<Register\n\t\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\t\tsetUid={this.props.setUid}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"login\":\n\t\t\t\treturn (\n\t\t\t\t\t<Login\n\t\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\t\tsetUid={this.props.setUid}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"settings\":\n\t\t\t\treturn (\n\t\t\t\t\t<Settings\n\t\t\t\t\t\tuid={this.props.uid}\n\t\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\t\tsetUid={this.props.setUid}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<Login\n\t\t\t\t\t\tsetView={this.props.setView}\n\t\t\t\t\t\tsetUid={this.props.setUid}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t}\n\t}\n}\n\nexport default Main;\n","import React from 'react';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { faSignInAlt, faUserPlus, faHome, faLeaf, faTree, faEdit, faSearch,\n         faBookmark as faBookmarkSolid, faUserCog, faSignOutAlt, faTrashAlt,\n         faArrowAltCircleRight, faPlusCircle, faMinusCircle, faReply, faCheck,\n         faPlus, faMinus, faUserCheck, faUserMinus} from '@fortawesome/free-solid-svg-icons';\nimport { faBookmark as faBookmarkRegular } from '@fortawesome/free-regular-svg-icons'; \nimport { checkAuthentication } from './Api';\nimport './glassbeads.css';\nimport Navbar from './Navbar';\nimport Main from './Main';\n\nlibrary.add(faSignInAlt, faUserPlus, faHome, faBookmarkSolid, faBookmarkRegular,\n            faEdit, faSearch, faUserCog, faSignOutAlt, faArrowAltCircleRight, faCheck,\n            faPlusCircle, faMinusCircle, faReply, faLeaf, faTree, faTrashAlt,\n            faPlus, faMinus, faUserCheck, faUserMinus)\n\nclass App extends React.Component {\n  constructor(props) {\n      super(props);\n\n      this.state = {\n        data: \"\",\n        page: \"\",\n        uid: undefined,\n        checkedSession: false\n      };\n      this.setView = this.setView.bind(this);\n      this.setUid = this.setUid.bind(this);\n    }\n\n    setView(viewPage, viewData) {\n      this.setState(state => ({\n        page: viewPage,\n        data: viewData,\n      }));\n    }\n\n    setUid(newUid) {\n      this.setState({uid: newUid});\n    }\n\n    loadSession() {\n      return checkAuthentication().then((data) => {\n        if (data.uid === null) {\n          this.setView(\n            '',\n            '');\n          this.setUid(undefined);\n        } else {\n          this.setView(\n            'aggregate',\n            `/users/${data.uid}/following/recent-posts`\n            )\n          this.setUid(data.uid);\n        }\n      })\n    }\n\n    componentDidMount() {\n      this.loadSession()\n      .then(() => this.setState({checkedSession: true}));\n    }\n\n  render() {\n    return (\n      <div id=\"app\">\n        { this.state.checkedSession\n          ?\n          <>\n            <Navbar\n              setView={this.setView}\n              setUid={this.setUid}\n              uid={this.state.uid}\n            />\n            <Main\n              setView={this.setView}\n              setUid={this.setUid}\n              page={this.state.page}\n              data={this.state.data}\n              uid={this.state.uid}\n            />\n          </>\n          :\n          <>\n            <nav></nav>\n            <div id=\"main\"></div>\n          </>\n        }\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}